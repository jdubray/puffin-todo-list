{
  "documentPath": "C:\\Users\\jjdub\\code\\todo-list\\docs\\todo-pwa-spec.md",
  "documentHash": "4ff7286f",
  "createdAt": "2026-02-09T21:15:34.470Z",
  "updatedAt": "2026-02-09T21:21:07.528Z",
  "responses": [
    {
      "id": "70fcf8fa-a84d-483b-ab32-6aa7fc9982e0",
      "timestamp": "2026-02-09T21:21:07.528Z",
      "prompt": "[1 inline marker] Write a complete functional specification and detailed design for a Todo PWA with the following requ...",
      "summary": "Applied 1 change(s) to document",
      "questions": [],
      "fullResponse": "```json\n{\n  \"type\": \"changes\",\n  \"summary\": [\n    \"Removed inline prompt marker and generated complete functional specification\",\n    \"Added comprehensive document with all 8 required sections\",\n    \"Included user stories, acceptance criteria, data model, SAM architecture details\",\n    \"Defined UI layout, technical architecture, PWA configuration, and acceptance criteria summary\"\n  ],\n  \"changes\": [\n    {\n      \"op\": \"replace\",\n      \"find\": \"/@puffin:\\n\\nWrite a complete functional specification and detailed design for a Todo PWA with the following requirements:\\n\\nPROJECT OVERVIEW:\\nA single-page application for managing a todo list. The app uses browser Local Storage for persistence (no backend server), vanilla JavaScript with the SAM pattern (State-Action-Model) for state management, and is built as a Progressive Web App so it can be installed on a phone and work offline.\\n\\nFUNCTIONAL REQUIREMENTS:\\n- Add a new todo (text input + submit)\\n- Display the list of todos\\n- Mark a todo as complete (toggle)\\n- Delete a todo\\n- Edit a todo title inline\\n- Filter todos: All, Active, Completed\\n- Show count of remaining active todos\\n- Clear all completed todos with one click\\n- All data persists in Local Storage across page reloads\\n\\nTECHNICAL REQUIREMENTS:\\n- Vanilla JavaScript, HTML, and CSS only (no frameworks, no npm, no build tools)\\n- SAM pattern (State-Action-Model) for state management:\\n  - Model: holds the todo list state and enforces business rules\\n  - Actions: pure functions that propose state changes (addTodo, toggleTodo, deleteTodo, etc.)\\n  - State representation: renders the current model state to the DOM\\n- Single-page application (one index.html file with app.js and styles.css)\\n- Responsive, mobile-first design\\n- Progressive Web App:\\n  - manifest.json for installability\\n  - service-worker.js with cache-first strategy for offline support\\n- Accessible: ARIA labels, keyboard navigation, semantic HTML\\n\\nDOCUMENT STRUCTURE:\\n1. Overview\\n2. Functional Requirements (as user stories with acceptance criteria)\\n3. Data Model (Local Storage schema, todo object structure)\\n4. SAM Architecture (Model, Actions, State representation — how they wire together)\\n5. UI Layout (describe each section: header, input area, todo list, filters, footer)\\n6. Technical Architecture (file structure, module responsibilities)\\n7. PWA Configuration (manifest fields, service worker caching strategy, offline behavior)\\n8. Acceptance Criteria Summary\\n\\nDo not ask any questions. Generate the complete specification ready for implementation.\\n\\n@/\",\n      \"content\": \"# Todo PWA - Functional Specification and Design\\n\\n## 1. Overview\\n\\nTodo PWA is a single-page Progressive Web Application for managing a todo list. Built with vanilla JavaScript, HTML, and CSS, it provides a responsive, offline-first experience using the SAM (State-Action-Model) architectural pattern for state management. All data persists locally via browser Local Storage, enabling seamless offline functionality and the ability to install the app on mobile devices.\\n\\n**Key Characteristics:**\\n- Zero external dependencies (vanilla stack)\\n- Offline-capable with service worker\\n- Installable on mobile devices\\n- Fully accessible with semantic HTML and ARIA labels\\n- Local-first data persistence\\n\\n---\\n\\n## 2. Functional Requirements (User Stories)\\n\\n### User Story 1: Add a New Todo\\n**Title:** Create a new todo item\\n**Description:** As a user, I want to add a new todo item to my list so that I can track tasks I need to complete.\\n**Acceptance Criteria:**\\n- An input field accepts text for a new todo\\n- A submit button (or Enter key) creates the todo\\n- Empty submissions are rejected (validation)\\n- Input field clears after successful submission\\n- New todo appears in the list immediately\\n- Todo is assigned a unique ID and created timestamp\\n\\n### User Story 2: Display Todo List\\n**Title:** View all todo items\\n**Description:** As a user, I want to see all my todos displayed in a list so that I can review what needs to be done.\\n**Acceptance Criteria:**\\n- Todos are displayed in reverse chronological order (newest first)\\n- Each todo shows its title text\\n- Completed todos have visual distinction (strikethrough, muted color)\\n- List updates immediately when todos are added, deleted, or modified\\n- Empty state message displays when no todos exist\\n\\n### User Story 3: Mark Todo as Complete\\n**Title:** Toggle todo completion status\\n**Description:** As a user, I want to mark a todo as complete so that I can track my progress.\\n**Acceptance Criteria:**\\n- Clicking a todo checkbox toggles completion state\\n- Keyboard shortcut (Space key on focused todo) also toggles state\\n- Completed todos are visually distinct (strikethrough text, grayed out)\\n- State persists in Local Storage immediately\\n- Completed status affects filter counts\\n\\n### User Story 4: Delete a Todo\\n**Title:** Remove a todo from the list\\n**Description:** As a user, I want to delete a todo so that I can remove tasks that are no longer relevant.\\n**Acceptance Criteria:**\\n- A delete button (trash icon) appears on hover or focus\\n- Clicking delete removes the todo from the list\\n- Deleted todos are removed from Local Storage\\n- No confirmation dialog required for single deletes\\n- List updates immediately\\n\\n### User Story 5: Edit Todo Title\\n**Title:** Modify a todo's text inline\\n**Description:** As a user, I want to edit a todo's text so that I can correct or update task descriptions.\\n**Acceptance Criteria:**\\n- Double-clicking a todo title enters edit mode\\n- Text becomes editable in an input field\\n- Pressing Enter saves changes\\n- Pressing Escape cancels editing (reverts text)\\n- Changes persist in Local Storage\\n- Empty edits are rejected\\n- Edit mode has visual indicator (border, background)\\n\\n### User Story 6: Filter Todos\\n**Title:** View todos by completion status\\n**Description:** As a user, I want to filter todos so that I can focus on specific task states.\\n**Acceptance Criteria:**\\n- Three filter options: All, Active (incomplete), Completed\\n- Filters are buttons or tabs in the UI\\n- Current filter is visually highlighted\\n- List updates immediately when filter changes\\n- Filter selection persists across page reloads (stored in Local Storage)\\n- Active filter affects the display but doesn't delete todos\\n\\n### User Story 7: Display Active Count\\n**Title:** Show remaining active todos\\n**Description:** As a user, I want to see how many active todos I have so that I know how much work remains.\\n**Acceptance Criteria:**\\n- A counter displays the number of incomplete todos\\n- Counter updates in real-time when todos are added, deleted, or toggled\\n- Displays singular \\\"1 item left\\\" or plural \\\"N items left\\\"\\n- Counter is prominently placed in the footer\\n- Correctly reflects the count regardless of current filter\\n\\n### User Story 8: Clear Completed Todos\\n**Title:** Bulk delete all completed todos\\n**Description:** As a user, I want to clear all completed todos at once so that I can declutter my list.\\n**Acceptance Criteria:**\\n- A \\\"Clear Completed\\\" button appears in the footer\\n- Button is only visible when completed todos exist\\n- Clicking removes all completed todos from the list\\n- Changes persist in Local Storage\\n- List updates immediately\\n- No confirmation required\\n\\n### User Story 9: Data Persistence\\n**Title:** Save todos across page reloads\\n**Description:** As a user, I want my todos to be saved so that I don't lose data when I refresh the page.\\n**Acceptance Criteria:**\\n- All todos persist in Local Storage\\n- Filter preference persists across reloads\\n- Data is updated in Local Storage on every change (optimistic write)\\n- Page reload displays the exact state from before reload\\n- No backend server is required\\n\\n---\\n\\n## 3. Data Model\\n\\n### Local Storage Schema\\n\\n**Key:** `todos`\\n**Type:** JSON array string\\n**Structure:**\\n```json\\n[\\n  {\\n    \\\"id\\\": \\\"unique-identifier-uuid-or-timestamp\\\",\\n    \\\"title\\\": \\\"Buy groceries\\\",\\n    \\\"completed\\\": false,\\n    \\\"createdAt\\\": 1707000000000\\n  },\\n  {\\n    \\\"id\\\": \\\"another-unique-id\\\",\\n    \\\"title\\\": \\\"Complete project\\\",\\n    \\\"completed\\\": true,\\n    \\\"createdAt\\\": 1706999000000\\n  }\\n]\\n```\\n\\n**Key:** `currentFilter`\\n**Type:** String\\n**Values:** `\\\"all\\\"` | `\\\"active\\\"` | `\\\"completed\\\"`\\n**Default:** `\\\"all\\\"`\\n\\n### Todo Object Structure\\n\\n| Field | Type | Description | Constraints |\\n|-------|------|-------------|-------------|\\n| `id` | String | Unique identifier | Generated on creation (timestamp + counter or UUID) |\\n| `title` | String | Todo text description | 1-500 characters, required, trimmed |\\n| `completed` | Boolean | Completion status | Default: `false` |\\n| `createdAt` | Number | Creation timestamp | Unix milliseconds, set on creation |\\n\\n### Business Rules\\n\\n- Todos are immutable by reference; state changes create new arrays\\n- IDs must be globally unique within the local storage\\n- Titles must be non-empty strings (after trimming whitespace)\\n- Completed status is binary (true/false)\\n- Creation timestamp is set once and never modified\\n\\n---\\n\\n## 4. SAM Architecture (State-Action-Model)\\n\\n### Architecture Overview\\n\\nThe SAM pattern separates concerns into three layers:\\n\\n1. **Model:** Holds state, enforces business rules\\n2. **Actions:** Pure functions that propose state changes\\n3. **State (Representation):** Renders current model state to DOM\\n\\nThe flow: User → Action → Model → State → DOM\\n\\n### Model Layer\\n\\n**Responsibility:** Maintain authoritative todo list state and enforce business rules.\\n\\n**State Object Structure:**\\n```javascript\\n{\\n  todos: [],           // Array of todo objects\\n  currentFilter: 'all' // 'all' | 'active' | 'completed'\\n}\\n```\\n\\n**Model Responsibilities:**\\n- Load state from Local Storage on initialization\\n- Accept action proposals and validate changes\\n- Reject invalid state changes (empty titles, duplicate IDs, etc.)\\n- Persist state to Local Storage after changes\\n- Provide computed properties (activeCount, filteredTodos, etc.)\\n\\n**Model Methods:**\\n- `init()`: Load state from Local Storage or initialize empty\\n- `addTodo(title)`: Create and add new todo, return updated state\\n- `toggleTodo(id)`: Toggle completion status, return updated state\\n- `deleteTodo(id)`: Remove todo by ID, return updated state\\n- `editTodo(id, newTitle)`: Update todo title, return updated state\\n- `setFilter(filterType)`: Change current filter, return updated state\\n- `clearCompleted()`: Remove all completed todos, return updated state\\n- `save(state)`: Persist state to Local Storage\\n- `load()`: Retrieve state from Local Storage\\n\\n### Actions Layer\\n\\n**Responsibility:** Pure functions that interpret user interactions and propose state changes.\\n\\n**Design Principles:**\\n- Actions are pure functions (no side effects)\\n- Each action receives current state and user input\\n- Each action returns a proposed new state or null if invalid\\n- Actions validate input and enforce business rules\\n\\n**Action Functions:**\\n```javascript\\naddTodoAction(state, title)\\n  - Input: title (string)\\n  - Validation: title not empty after trim\\n  - Returns: new state with todo added, or null\\n\\ntoggleTodoAction(state, todoId)\\n  - Input: todoId (string)\\n  - Validation: todo exists\\n  - Returns: new state with todo toggled\\n\\ndeleteTodoAction(state, todoId)\\n  - Input: todoId (string)\\n  - Validation: todo exists\\n  - Returns: new state with todo removed\\n\\neditTodoAction(state, todoId, newTitle)\\n  - Input: todoId, newTitle (string)\\n  - Validation: title not empty, todo exists\\n  - Returns: new state with todo title updated\\n\\nsetFilterAction(state, filterType)\\n  - Input: filterType ('all' | 'active' | 'completed')\\n  - Validation: valid filter type\\n  - Returns: new state with filter changed\\n\\nclearCompletedAction(state)\\n  - Input: none\\n  - Returns: new state with completed todos removed\\n```\\n\\n### State Representation Layer\\n\\n**Responsibility:** Render current model state to the DOM.\\n\\n**State Function Responsibilities:**\\n- Observe model state changes\\n- Compute UI-specific derived data (filtered lists, counts, etc.)\\n- Update DOM to reflect state\\n- Minimize re-renders (update only changed elements)\\n\\n**State Function Operations:**\\n- Render header with app title\\n- Render input field and submit button\\n- Render filtered todo list with completion checkboxes and delete buttons\\n- Render filter tabs (All, Active, Completed) with current filter highlighted\\n- Render active todo count\\n- Render \\\"Clear Completed\\\" button (only when completed todos exist)\\n- Set focus after actions (new input after add, first todo after clear)\\n\\n**Derived Data Computed by State:**\\n- `filteredTodos`: Array of todos matching current filter\\n- `activeCount`: Number of incomplete todos\\n- `completedCount`: Number of completed todos\\n- `hasCompleted`: Boolean indicating if any completed todos exist\\n\\n### SAM Flow Diagram\\n\\n```\\nUser Interaction (click, keypress, input)\\n         ↓\\n    Action Handler\\n         ↓\\n  Action Function (validate, propose)\\n         ↓\\n    Model Accepts/Rejects\\n         ↓\\n  Model Persists to Local Storage\\n         ↓\\n  State Re-renders DOM\\n         ↓\\n    User sees changes\\n```\\n\\n### Initialization Flow\\n\\n```javascript\\n// 1. Model loads state from Local Storage\\nconst initialState = model.load();\\n\\n// 2. State renders initial DOM\\nstate.render(initialState);\\n\\n// 3. Event listeners attached to actions\\ndocument.addEventListener('click', (e) => {\\n  if (e.target.matches('.add-btn')) {\\n    const title = inputField.value;\\n    const newState = addTodoAction(currentState, title);\\n    if (newState) {\\n      model.save(newState);\\n      state.render(newState);\\n      currentState = newState;\\n    }\\n  }\\n});\\n```\\n\\n---\\n\\n## 5. UI Layout\\n\\n### Overall Structure\\n\\n```\\n┌─────────────────────────────────────┐\\n│ HEADER                              │\\n│ Todo PWA                            │\\n└─────────────────────────────────────┘\\n┌─────────────────────────────────────┐\\n│ INPUT SECTION                       │\\n│ [Input field] [Add Button]          │\\n└─────────────────────────────────────┘\\n┌─────────────────────────────────────┐\\n│ FILTER TABS                         │\\n│ All  Active  Completed              │\\n└─────────────────────────────────────┘\\n┌─────────────────────────────────────┐\\n│ TODO LIST                           │\\n│ ☑ Todo 1        [Delete]            │\\n│ ☐ Todo 2        [Delete]            │\\n│ ☑ Todo 3        [Delete]            │\\n│ (No todos message if empty)         │\\n└─────────────────────────────────────┘\\n┌─────────────────────────────────────┐\\n│ FOOTER                              │\\n│ 2 items left  [Clear Completed]     │\\n└─────────────────────────────────────┘\\n```\\n\\n### Header Section\\n- Title: \\\"Todo PWA\\\" or \\\"My Tasks\\\"\\n- Centered, prominent styling\\n- Mobile-friendly padding\\n\\n### Input Section\\n- Text input field with placeholder \\\"Add a new todo...\\\"\\n- Submit button labeled \\\"Add\\\" or icon button (checkmark)\\n- Enter key submits the form\\n- Input field has focus after page load and successful submission\\n- Clear visual feedback on input focus\\n\\n### Filter Tabs Section\\n- Three buttons: \\\"All\\\", \\\"Active\\\", \\\"Completed\\\"\\n- Active filter visually highlighted (underline, bold, background color)\\n- Buttons styled as tabs or radio buttons\\n- Accessible keyboard navigation between tabs\\n\\n### Todo List Section\\n- Each todo is a list item containing:\\n  - Checkbox (toggle completion)\\n  - Todo title text (clickable to edit on double-click)\\n  - Delete button (trash icon, appears on hover/focus)\\n- Strikethrough applied to completed todos\\n- Muted color for completed todos (e.g., gray text)\\n- Empty state message: \\\"No todos yet. Add one above!\\\" (or similar)\\n- List updates based on current filter\\n- Smooth animations on add/delete (optional, fade/slide)\\n\\n### Footer Section\\n- Display: \\\"N items left\\\" (or \\\"1 item left\\\" if one active)\\n- Active only when todos exist\\n- \\\"Clear Completed\\\" button (appears only if completed todos exist)\\n- Button clearly labeled\\n- Footer aligned to bottom on mobile\\n\\n### Responsive Behavior\\n- Mobile-first design\\n- Single column layout on small screens\\n- Adequate padding and touch targets (44px minimum height)\\n- Text input and buttons sized for mobile interaction\\n- Horizontal centering of content on larger screens\\n- Max-width constraint on desktop (e.g., 600px)\\n\\n---\\n\\n## 6. Technical Architecture\\n\\n### File Structure\\n\\n```\\nproject-root/\\n├── index.html          # Single HTML file, markup and structure\\n├── app.js              # SAM implementation (Model, Actions, State)\\n├── styles.css          # All styling\\n├── manifest.json       # PWA manifest\\n├── service-worker.js   # Offline support and caching\\n└── icons/              # App icons for PWA\\n    ├── icon-192.png    # 192x192 icon\\n    └── icon-512.png    # 512x512 icon\\n```\\n\\n### app.js Module Structure\\n\\n**Section 1: Constants and Utilities**\\n- `STORAGE_KEY = 'todos'`\\n- `FILTER_KEY = 'currentFilter'`\\n- `generateId()`: Create unique todo ID (timestamp + counter)\\n- `trimTitle(title)`: Normalize input\\n\\n**Section 2: Model Object**\\n```javascript\\nconst model = {\\n  state: { todos: [], currentFilter: 'all' },\\n  \\n  load() {\\n    // Load from Local Storage or return default\\n  },\\n  \\n  save(newState) {\\n    // Persist to Local Storage\\n    // Update this.state\\n  },\\n  \\n  addTodo(title) { /* ... */ },\\n  toggleTodo(id) { /* ... */ },\\n  deleteTodo(id) { /* ... */ },\\n  editTodo(id, newTitle) { /* ... */ },\\n  setFilter(filterType) { /* ... */ },\\n  clearCompleted() { /* ... */ },\\n  \\n  getActiveCount() { /* ... */ },\\n  getCompletedCount() { /* ... */ },\\n  getFilteredTodos() { /* ... */ }\\n};\\n```\\n\\n**Section 3: Actions Object**\\n```javascript\\nconst actions = {\\n  addTodo(title) {\\n    const newState = addTodoAction(model.state, title);\\n    if (newState) model.save(newState);\\n    return newState;\\n  },\\n  // Similar for toggleTodo, deleteTodo, etc.\\n};\\n```\\n\\n**Section 4: State Rendering Function**\\n```javascript\\nfunction renderState(state) {\\n  // Compute derived data\\n  const filtered = getFilteredTodos(state);\\n  const activeCount = getActiveCount(state);\\n  \\n  // Update DOM elements\\n  updateTodoList(filtered);\\n  updateFilterButtons(state.currentFilter);\\n  updateActiveCountDisplay(activeCount);\\n  updateClearCompletedButton(activeCount > 0);\\n}\\n```\\n\\n**Section 5: Event Listeners**\\n```javascript\\ndocument.addEventListener('DOMContentLoaded', () => {\\n  model.load();\\n  renderState(model.state);\\n  \\n  // Attach event handlers for:\\n  // - Input field (Enter to submit)\\n  // - Add button (click)\\n  // - Delete buttons (click)\\n  // - Checkboxes (change event)\\n  // - Filter buttons (click)\\n  // - Edit on double-click\\n  // - Escape to cancel edit\\n});\\n```\\n\\n### Styling Architecture (styles.css)\\n\\n**Organization:**\\n1. Reset/Normalize: Base styles, font stack\\n2. Layout: Grid, flexbox for header, input, list, footer\\n3. Components: Buttons, input fields, list items, filter tabs\\n4. States: Completed todos, edit mode, active filter, hover states\\n5. Responsive: Media queries for mobile/tablet/desktop\\n6. Accessibility: Focus states, high contrast, reduced-motion\\n\\n**Key CSS Classes:**\\n- `.container`: Main wrapper\\n- `.header`: App title\\n- `.input-section`: Input field and button\\n- `.filter-tabs`: Filter buttons container\\n- `.todo-list`: Unordered list\\n- `.todo-item`: Individual list item\\n- `.todo-checkbox`: Checkbox element\\n- `.todo-title`: Title text\\n- `.todo-delete`: Delete button\\n- `.todo-item.completed`: Strikethrough style\\n- `.todo-item.editing`: Edit mode style\\n- `.filter-tabs button.active`: Highlighted active filter\\n- `.footer`: Count and clear button\\n- `.empty-state`: No todos message\\n\\n---\\n\\n## 7. PWA Configuration\\n\\n### manifest.json\\n\\n```json\\n{\\n  \\\"name\\\": \\\"Todo PWA\\\",\\n  \\\"short_name\\\": \\\"Todo\\\",\\n  \\\"description\\\": \\\"A simple, offline-first todo list application\\\",\\n  \\\"start_url\\\": \\\"/\\\",\\n  \\\"display\\\": \\\"standalone\\\",\\n  \\\"scope\\\": \\\"/\\\",\\n  \\\"theme_color\\\": \\\"#2196F3\\\",\\n  \\\"background_color\\\": \\\"#FFFFFF\\\",\\n  \\\"orientation\\\": \\\"portrait-primary\\\",\\n  \\\"icons\\\": [\\n    {\\n      \\\"src\\\": \\\"/icons/icon-192.png\\\",\\n      \\\"sizes\\\": \\\"192x192\\\",\\n      \\\"type\\\": \\\"image/png\\\",\\n      \\\"purpose\\\": \\\"any\\\"\\n    },\\n    {\\n      \\\"src\\\": \\\"/icons/icon-512.png\\\",\\n      \\\"sizes\\\": \\\"512x512\\\",\\n      \\\"type\\\": \\\"image/png\\\",\\n      \\\"purpose\\\": \\\"any\\\"\\n    }\\n  ],\\n  \\\"categories\\\": [\\\"productivity\\\"]\\n}\\n```\\n\\n**Manifest Fields Explained:**\\n- `name`: Full application name displayed during install\\n- `short_name`: Abbreviated name for home screen icon label\\n- `display: \\\"standalone\\\"`: App appears as standalone application, not browser\\n- `start_url`: Entry point when launched from home screen\\n- `theme_color`: Status bar color on Android\\n- `background_color`: Splash screen background color during launch\\n- `icons`: App icons in various sizes for different devices\\n\\n### service-worker.js\\n\\n**Strategy:** Cache-first with network fallback\\n\\n**Implementation:**\\n\\n```javascript\\nconst CACHE_NAME = 'todo-pwa-v1';\\nconst ASSETS_TO_CACHE = [\\n  '/',\\n  '/index.html',\\n  '/app.js',\\n  '/styles.css',\\n  '/manifest.json',\\n  '/icons/icon-192.png',\\n  '/icons/icon-512.png'\\n];\\n\\nself.addEventListener('install', (event) => {\\n  // Cache all assets\\n  event.waitUntil(\\n    caches.open(CACHE_NAME).then((cache) => {\\n      return cache.addAll(ASSETS_TO_CACHE);\\n    })\\n  );\\n});\\n\\nself.addEventListener('fetch', (event) => {\\n  // Cache-first strategy\\n  event.respondWith(\\n    caches.match(event.request).then((response) => {\\n      return response || fetch(event.request);\\n    })\\n  );\\n});\\n\\nself.addEventListener('activate', (event) => {\\n  // Clean up old cache versions\\n  event.waitUntil(\\n    caches.keys().then((cacheNames) => {\\n      return Promise.all(\\n        cacheNames\\n          .filter((name) => name !== CACHE_NAME)\\n          .map((name) => caches.delete(name))\\n      );\\n    })\\n  );\\n});\\n```\\n\\n**Caching Strategy Explanation:**\\n1. **Install Event:** Pre-cache all essential assets on first install\\n2. **Fetch Event:** Serve from cache first, fall back to network if not cached\\n3. **Activate Event:** Clean up old cache versions on update\\n4. **Result:** Works offline with latest cached version; network requests update cache if available\\n\\n### Offline Behavior\\n\\n- **First Load:** App caches all assets during service worker installation\\n- **Subsequent Loads:** Served entirely from cache, instant load times\\n- **Data Persistence:** Local Storage works offline without service worker involvement\\n- **No Network:** App functions fully; todos sync to Local Storage as normal\\n- **Reconnect:** Service worker updates cache on next network request (transparent)\\n- **Update:** New version cached on next app visit; user experiences new version on subsequent visit\\n\\n### index.html Meta Tags for PWA\\n\\n```html\\n<link rel=\\\"manifest\\\" href=\\\"/manifest.json\\\">\\n<meta name=\\\"theme-color\\\" content=\\\"#2196F3\\\">\\n<meta name=\\\"apple-mobile-web-app-capable\\\" content=\\\"yes\\\">\\n<meta name=\\\"apple-mobile-web-app-status-bar-style\\\" content=\\\"black-translucent\\\">\\n<meta name=\\\"apple-mobile-web-app-title\\\" content=\\\"Todo\\\">\\n<link rel=\\\"apple-touch-icon\\\" href=\\\"/icons/icon-192.png\\\">\\n<meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1\\\">\\n```\\n\\n---\\n\\n## 8. Acceptance Criteria Summary\\n\\n### Functional Acceptance Criteria\\n\\n✅ **Add Todo**\\n- Input field accepts text; Enter key or button click adds todo\\n- Empty submissions rejected with visual feedback\\n- Field clears after successful add\\n- New todo appears in list\\n- Persists in Local Storage\\n\\n✅ **Display Todos**\\n- Todos shown in reverse chronological order\\n- Completed todos visually distinct (strikethrough, gray)\\n- Empty state shown when no todos exist\\n- Updates immediately on changes\\n\\n✅ **Toggle Completion**\\n- Checkbox toggles completion status\\n- Space key also toggles on focused todo\\n- Persists immediately to Local Storage\\n- Affects filter counts\\n\\n✅ **Delete Todo**\\n- Delete button removes todo\\n- Removed from Local Storage\\n- List updates immediately\\n- No confirmation required\\n\\n✅ **Edit Todo**\\n- Double-click enters edit mode\\n- Enter saves; Escape cancels\\n- Empty edits rejected\\n- Persists to Local Storage\\n\\n✅ **Filtering**\\n- Three filters: All, Active, Completed\\n- Current filter highlighted\\n- Filters affect display only, not data\\n- Selection persists across reloads\\n\\n✅ **Active Count**\\n- Shows \\\"N items left\\\" (or \\\"1 item left\\\")\\n- Updates in real-time\\n- Only counts incomplete todos\\n- Visible in footer\\n\\n✅ **Clear Completed**\\n- Button removes all completed todos\\n- Only visible when completed todos exist\\n- Persists immediately\\n- No confirmation required\\n\\n✅ **Data Persistence**\\n- All todos persist in Local Storage\\n- Filter preference persists\\n- State matches after page reload\\n- Updates optimistically (no network delay)\\n\\n### Technical Acceptance Criteria\\n\\n✅ **Vanilla Stack**\\n- No frameworks (React, Vue, Angular, etc.)\\n- No npm dependencies\\n- No build tools\\n- HTML, CSS, JavaScript only\\n\\n✅ **SAM Architecture**\\n- Model holds authoritative state\\n- Actions are pure functions\\n- State rendering is separate from business logic\\n- Clear data flow: User → Action → Model → State → DOM\\n- State changes trigger DOM updates\\n\\n✅ **Single-Page Application**\\n- One index.html file\\n- app.js contains all logic\\n- styles.css contains all styling\\n- No page reloads\\n- Smooth, single-page experience\\n\\n✅ **Responsive Design**\\n- Mobile-first approach\\n- Touch-friendly targets (44px minimum)\\n- Readable on small screens\\n- Adapts to tablet and desktop\\n- No horizontal scrolling on mobile\\n\\n✅ **Progressive Web App**\\n- manifest.json present with required fields\\n- service-worker.js with cache-first strategy\\n- Installable on mobile devices (Android, iOS)\\n- Works fully offline\\n- Icons for home screen\\n- Fast load times (cached assets)\\n\\n✅ **Accessibility**\\n- Semantic HTML (form, ul, li, button, etc.)\\n- ARIA labels on interactive elements\\n- Keyboard navigation (Tab, Enter, Escape, Space)\\n- High contrast colors (WCAG AA)\\n- Focus indicators on all interactive elements\\n- No reliance on color alone for information\\n\\n✅ **Code Quality**\\n- Clean separation of concerns\\n- Consistent naming conventions (camelCase)\\n- JSDoc comments on functions\\n- No console errors or warnings\\n- Efficient DOM updates (minimize reflows)\\n\\n### Testing Acceptance Criteria\\n\\n✅ **Manual Testing Checklist**\\n- Add multiple todos and verify display\\n- Toggle completion and verify visual changes\\n- Delete a todo and verify removal\\n- Edit a todo and verify changes\\n- Switch between filters and verify list changes\\n- Verify active count updates correctly\\n- Clear completed todos and verify removal\\n- Refresh page and verify state restoration\\n- Test on mobile device or mobile emulator\\n- Test offline functionality (DevTools offline mode)\\n- Test install prompt and home screen launch\\n- Test all keyboard shortcuts (Enter, Escape, Space)\\n- Verify all elements are keyboard accessible\\n- Test on small, medium, and large screens\\n\\n### Performance Acceptance Criteria\\n\\n✅ **Load Time**\\n- Initial load < 2 seconds on 3G\\n- Subsequent loads < 1 second (cached)\\n\\n✅ **Interactions**\\n- Add, delete, toggle, edit respond immediately\\n- No noticeable lag or jank\\n- Filter changes instant\\n\\n✅ **Storage**\\n- Local Storage usage reasonable (< 1MB for 1000 todos)\\n- Cache size appropriate (only essential assets)\\n\\n---\\n\\n## Summary\\n\\nThis specification defines a complete, offline-first Todo PWA using vanilla JavaScript, the SAM architectural pattern, and Progressive Web App standards. The app prioritizes simplicity, accessibility, and mobile-first design while maintaining clean code architecture and immediate data persistence through Local Storage. Implementation should follow the detailed specifications in each section to ensure a consistent, reliable, and user-friendly experience.\"\n    }\n  ]\n}\n```",
      "diffStats": {
        "added": 739,
        "deleted": 0,
        "modified": 1
      },
      "model": "haiku",
      "collapsed": false,
      "documentApplied": true,
      "appliedChanges": 1,
      "failedChanges": 0
    }
  ]
}